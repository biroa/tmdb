language: php
php:
  - '7.1'

env:
  global:
    - PHPUNIT_BIN='vendor/bin/phpunit'
    - PHPUNIT_CONFIG='phpunit.xml'
    - PHPUNIT_FLAGS='--stop-on-failure --verbose'

before_script:
  - composer config --global repo.packagist composer https://packagist.org
  - composer install

script : $PHPUNIT_BIN -c $PHPUNIT_CONFIG $PHPUNIT_FLAGS

addons:
  code_climate:
    repo_token: 62b27466fcf178ab2bd97abacf491634849ddae5eb420ce0bd28f2f4aab6f142

after_success:
  - vendor/bin/test-reporter
